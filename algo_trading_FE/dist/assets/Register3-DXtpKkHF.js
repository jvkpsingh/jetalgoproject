import{aF as M,R as v,r as w,b as ne,m as se,d as ae,j as e,Q as ie,G as i,T as S,q,B as O,s as z,A as Y,n as H,E as oe,f as le,u as me,i as ue,k as pe,D as ee,F as he,o as xe,p as _,a1 as te,I as Z,O as X,t as ge,v as fe,w as je,x as be,z as ye,K as ve,N as we,U as Se}from"./index-Dqf28ZN6.js";import{G as Ie}from"./social-google-DrU3ibd8.js";import{C as Ne}from"./Checkbox-B1j2OY_C.js";const Ce=r=>new RegExp(/[0-9]/).test(r),ke=r=>new RegExp(/[a-z]/).test(r)&&new RegExp(/[A-Z]/).test(r),Pe=r=>new RegExp(/[!#@$%^&*)(+=._-]/).test(r),Ae=r=>r<2?{label:"Poor",color:M.errorMain}:r<3?{label:"Weak",color:M.warningDark}:r<4?{label:"Normal",color:M.orangeMain}:r<5?{label:"Good",color:M.successMain}:r<6?{label:"Strong",color:M.successDark}:{label:"Poor",color:M.errorMain},De=r=>{let a=0;return r.length>5&&(a+=1),r.length>7&&(a+=1),Ce(r)&&(a+=1),Pe(r)&&(a+=1),ke(r)&&(a+=1),a};var re=function(r){return typeof r=="object"&&r!==null},Ee=function(r){var a=r.value,I=a===void 0?"":a,b=r.numInputs,o=b===void 0?4:b,P=r.onChange,A=r.onPaste,W=r.renderInput,D=r.shouldAutoFocus,E=D===void 0?!1:D,N=r.inputType,l=N===void 0?"text":N,p=r.renderSeparator,g=r.placeholder,C=r.containerStyle,R=r.inputStyle,V=r.skipDefaultStyles,Q=V===void 0?!1:V,$=v.useState(0),u=$[0],L=$[1],f=v.useRef([]),F=function(){return I?I.toString().split(""):[]},n=l==="number"||l==="tel";v.useEffect(function(){f.current=f.current.slice(0,o)},[o]),v.useEffect(function(){var t;E&&((t=f.current[0])===null||t===void 0||t.focus())},[E]);var c=function(){if(typeof g=="string"){if(g.length===o)return g;g.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}},m=function(t){var s=n?!isNaN(Number(t)):typeof t=="string";return s&&t.trim().length===1},T=function(t){var s=t.target.value;m(s)&&(U(s),y(u+1))},B=function(t){var s=t.nativeEvent,d=t.target.value;if(!m(d)){if(d.length===o){var h=d.split("").some(function(j){return!m(j)});h||(J(d.split("")),y(o-1))}s.data===null&&s.inputType==="deleteContentBackward"&&(t.preventDefault(),U(""),y(u-1)),t.target.value=""}},x=function(t){return function(s){L(s),t.target.select()}},k=function(){L(u-1)},G=function(t){var s=F();[t.code,t.key].includes("Backspace")?(t.preventDefault(),U(""),y(u-1)):t.code==="Delete"?(t.preventDefault(),U("")):t.code==="ArrowLeft"?(t.preventDefault(),y(u-1)):t.code==="ArrowRight"||t.key===s[u]?(t.preventDefault(),y(u+1)):(t.code==="Spacebar"||t.code==="Space"||t.code==="ArrowUp"||t.code==="ArrowDown")&&t.preventDefault()},y=function(t){var s,d,h=Math.max(Math.min(o-1,t),0);f.current[h]&&((s=f.current[h])===null||s===void 0||s.focus(),(d=f.current[h])===null||d===void 0||d.select(),L(h))},U=function(t){var s=F();s[u]=t[0],J(s)},J=function(t){var s=t.join("");P(s)},ce=function(t){var s;t.preventDefault();var d=F(),h=u,j=t.clipboardData.getData("text/plain").slice(0,o-u).split("");if(!(n&&j.some(function(de){return isNaN(Number(de))}))){for(var K=0;K<o;++K)K>=u&&j.length>0&&(d[K]=(s=j.shift())!==null&&s!==void 0?s:"",h++);y(h),J(d)}};return v.createElement("div",{style:Object.assign({display:"flex",alignItems:"center"},re(C)&&C),className:typeof C=="string"?C:void 0,onPaste:A},Array.from({length:o},function(t,s){return s}).map(function(t){var s,d,h;return v.createElement(v.Fragment,{key:t},W({value:(s=F()[t])!==null&&s!==void 0?s:"",placeholder:(h=(d=c())===null||d===void 0?void 0:d[t])!==null&&h!==void 0?h:void 0,ref:function(j){return f.current[t]=j},onChange:T,onFocus:function(j){return x(j)(t)},onBlur:k,onKeyDown:G,onPaste:ce,autoComplete:"off","aria-label":"Please enter OTP character ".concat(t+1),style:Object.assign(Q?{}:{width:"1em",textAlign:"center"},re(R)?R:{}),className:typeof R=="string"?R:void 0,type:l,inputMode:n?"numeric":"text",onInput:B},t),t<o-1&&(typeof p=="function"?p(t):p))}))};const Re=({email:r})=>{const[a,I]=w.useState(""),[b,o]=w.useState(""),{showSnackbar:P,SnackbarComponent:A}=ne(),W=se(),D=l=>{I(l),l.length!==5?o("Please enter a 5-digit OTP."):o("")},E="https://backend.jetalgosoftware.com",N=ae(l=>le.post(`${E}/auth/validate/otp?uuid=wrvbekbnek`,l,{headers:{"Content-Type":"application/json",token:localStorage.getItem("token")}}),{onSuccess:l=>{P("Registration successful!","success"),localStorage.removeItem("token"),localStorage.setItem("authToken",l.data.auth_token),setTimeout(()=>{W("/login")},2e3)},onError:l=>{var p,g;P(((g=(p=l.response)==null?void 0:p.data)==null?void 0:g.error.msg)||"Registration failed. Please try again.","error")}});return e.jsxs(e.Fragment,{children:[e.jsx(ie,{children:e.jsxs(i,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",children:[e.jsxs(i,{item:!0,xs:12,children:[e.jsx(S,{color:"secondary.main",gutterBottom:!0,variant:"h2",textAlign:"center",children:"OTP Verification"}),e.jsxs(S,{pb:2,textAlign:"center",fontFamily:"sans-serif",children:["Enter the OTP sent to ",r]})]}),e.jsx(i,{item:!0,xs:12,children:e.jsxs(q,{fullWidth:!0,error:!!b,children:[e.jsx(O,{sx:{display:"flex",justifyContent:"center",mb:2},children:e.jsx(Ee,{value:a,onChange:D,numInputs:5,isInputNum:!0,shouldAutoFocus:!0,renderSeparator:e.jsx("span",{style:{width:"8px"}}),renderInput:l=>e.jsx("input",{...l}),inputStyle:{width:"50px",height:"50px",margin:"0 5px",fontSize:"18px",borderRadius:"4px",border:"1px solid #ddd"}})}),b&&e.jsx(z,{error:!0,id:"otp-error-text",children:b})]})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(Y,{children:e.jsx(H,{disableElevation:!0,fullWidth:!0,size:"large",variant:"contained",color:"secondary",onClick:()=>{console.log("otp",a),N.mutate({otp:a})},disabled:a.length!==5,startIcon:N.isLoading?e.jsx(oe,{size:20}):null,children:"Verify OTP"})})})]})}),e.jsx(A,{})]})},Fe=v.memo(Re),Te=({...r})=>{const a=me(),I=ue(a.breakpoints.down("md")),b=pe(n=>n.customization),[o,P]=w.useState(!1),[A,W]=w.useState(!0),[D,E]=w.useState(0),[N,l]=w.useState(""),[p,g]=w.useState(),[C,R]=w.useState("register"),{showSnackbar:V,SnackbarComponent:Q}=ne();se();const $="https://backend.jetalgosoftware.com",u=ae(n=>le.post(`${$}/auth/register?uuid=wrvbekbnek`,n,{headers:{"Content-Type":"application/json"}}),{onSuccess:n=>{localStorage.setItem("token",n.data.token),R("otp-section")},onError:n=>{var c,m;V(((m=(c=n.response)==null?void 0:c.data)==null?void 0:m.error.msg)||"Registration failed. Please try again.","error")}}),L=()=>{P(!o)},f=n=>{n.preventDefault()},F=n=>{const c=De(n);E(c),g(Ae(c))};return e.jsxs(e.Fragment,{children:[C==="register"?e.jsxs(e.Fragment,{children:[e.jsxs(i,{container:!0,direction:"column",justifyContent:"center",spacing:2,children:[e.jsx(i,{item:!0,xs:12,children:e.jsx(Y,{children:e.jsxs(H,{variant:"outlined",fullWidth:!0,onClick:()=>console.error("Register"),size:"large",sx:{color:"grey.700",backgroundColor:a.palette.grey[50],borderColor:a.palette.grey[100]},children:[e.jsx(O,{sx:{mr:{xs:1,sm:2,width:20}},children:e.jsx("img",{src:Ie,alt:"google",width:16,height:16,style:{marginRight:I?8:16}})}),"Sign up with Google"]})})}),e.jsx(i,{item:!0,xs:12,children:e.jsxs(O,{sx:{alignItems:"center",display:"flex"},children:[e.jsx(ee,{sx:{flexGrow:1},orientation:"horizontal"}),e.jsx(H,{variant:"outlined",sx:{cursor:"unset",m:2,py:.5,px:7,borderColor:`${a.palette.grey[100]} !important`,color:`${a.palette.grey[900]}!important`,fontWeight:500,borderRadius:`${b.borderRadius}px`},disableRipple:!0,disabled:!0,children:"OR"}),e.jsx(ee,{sx:{flexGrow:1},orientation:"horizontal"})]})}),e.jsx(i,{item:!0,xs:12,container:!0,alignItems:"center",justifyContent:"center",children:e.jsx(O,{sx:{mb:2},children:e.jsx(S,{variant:"subtitle1",children:"Sign up with Email address"})})})]}),e.jsx(he,{initialValues:{firstName:"",lastName:"",phoneNumber:"",email:"",password:"",submit:null},validationSchema:xe().shape({firstName:_().max(255).required("First Name is required"),lastName:_().max(255).required("Last Name is required"),phoneNumber:_().required("Phone number is required").matches(/^[0-9]+$/,"Must be a valid phone number").max(15),email:_().email("Must be a valid email").max(255).required("Email is required"),password:_().max(255).required("Password is required")}),onSubmit:async(n,{setStatus:c,setSubmitting:m})=>{var T,B;try{l(n.email),await u.mutateAsync({first_name:n.firstName,last_name:n.lastName,contact_number:n.phoneNumber,email_id:n.email,password:n.password})}catch(x){console.log("error on signup",(B=(T=x.response)==null?void 0:T.data)==null?void 0:B.message),c({success:!1})}finally{m(!1)}},children:({errors:n,handleBlur:c,handleChange:m,handleSubmit:T,isSubmitting:B,touched:x,values:k})=>e.jsxs("form",{noValidate:!0,onSubmit:T,...r,children:[e.jsxs(i,{container:!0,spacing:I?0:2,children:[e.jsxs(i,{item:!0,xs:12,sm:6,children:[e.jsx(te,{fullWidth:!0,label:"First Name",margin:"normal",name:"firstName",type:"text",onBlur:c,onChange:m,value:k.firstName,sx:{...a.typography.customInput}}),x.firstName&&n.firstName&&e.jsx(z,{error:!0,children:n.firstName})]}),e.jsxs(i,{item:!0,xs:12,sm:6,children:[e.jsx(te,{fullWidth:!0,label:"Last Name",margin:"normal",name:"lastName",type:"text",onBlur:c,onChange:m,value:k.lastName,sx:{...a.typography.customInput}}),x.lastName&&n.lastName&&e.jsx(z,{error:!0,children:n.lastName})]})]}),e.jsxs(q,{fullWidth:!0,error:!!(x.phoneNumber&&n.phoneNumber),sx:{...a.typography.customInput},children:[e.jsx(Z,{htmlFor:"outlined-adornment-phone-register",children:"Phone Number"}),e.jsx(X,{id:"outlined-adornment-phone-register",type:"text",value:k.phoneNumber,name:"phoneNumber",onBlur:c,onChange:m,label:"Phone Number"}),x.phoneNumber&&n.phoneNumber&&e.jsx(z,{error:!0,children:n.phoneNumber})]}),e.jsxs(q,{fullWidth:!0,error:!!(x.email&&n.email),sx:{...a.typography.customInput},children:[e.jsx(Z,{htmlFor:"outlined-adornment-email-register",children:"Email ID"}),e.jsx(X,{id:"outlined-adornment-email-register",type:"email",value:k.email,name:"email",onBlur:c,onChange:m,label:"Email ID"}),x.email&&n.email&&e.jsx(z,{error:!0,children:n.email})]}),e.jsxs(q,{fullWidth:!0,error:!!(x.password&&n.password),sx:{...a.typography.customInput},children:[e.jsx(Z,{htmlFor:"outlined-adornment-password-register",children:"Password"}),e.jsx(X,{id:"outlined-adornment-password-register",type:o?"text":"password",value:k.password,name:"password",onBlur:c,onChange:G=>{m(G),F(G.target.value)},label:"Password",endAdornment:e.jsx(ge,{position:"end",children:e.jsx(fe,{"aria-label":"toggle password visibility",onClick:L,onMouseDown:f,edge:"end",size:"large",children:o?e.jsx(je,{}):e.jsx(be,{})})})}),x.password&&n.password&&e.jsx(z,{error:!0,children:n.password})]}),D!==0&&e.jsx(q,{fullWidth:!0,children:e.jsx(O,{sx:{mb:2},children:e.jsxs(i,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(i,{item:!0,children:e.jsx(O,{style:{backgroundColor:p==null?void 0:p.color},sx:{width:85,height:8,borderRadius:"7px"}})}),e.jsx(i,{item:!0,children:e.jsx(S,{variant:"subtitle1",fontSize:"0.75rem",children:p==null?void 0:p.label})})]})})}),e.jsxs(i,{container:!0,alignItems:"center",justifyContent:"space-between",spacing:2,children:[e.jsx(i,{item:!0,children:e.jsx(ye,{control:e.jsx(Ne,{checked:A,onChange:()=>W(!A)}),label:e.jsx(S,{variant:"body2",children:"I agree to the terms and conditions"})})}),e.jsx(i,{item:!0,children:e.jsx(Y,{children:e.jsx(H,{disableElevation:!0,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",disabled:B,startIcon:u.isLoading?e.jsx(oe,{size:20}):null,children:"Register"})})})]})]})})]}):null,C==="otp-section"?e.jsx(Fe,{email:N}):null,e.jsx(Q,{})]})},ze=()=>{const r=ue(a=>a.breakpoints.down("md"));return e.jsx(ve,{children:e.jsxs(i,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"stretch",sx:{minHeight:"100vh"},children:[e.jsx(we,{}),e.jsx(i,{xs:12,md:7,bgcolor:"white",children:e.jsx(i,{direction:"column",justifyContent:"center",alignItems:"center",sx:{height:"100%"},children:e.jsx(i,{container:!0,sx:{width:"100%"},justifyContent:"center",children:e.jsx(ie,{children:e.jsxs(i,{children:[e.jsxs(i,{item:!0,xs:12,children:[e.jsx(S,{color:"secondary.main",gutterBottom:!0,variant:r?"h3":"h2",textAlign:"center",children:"Jet Algo Trading"}),e.jsx(S,{pb:2,textAlign:"center",fontFamily:"sans-serif",children:"Login into your account to start adding strategies to your trades!"})]}),e.jsx(i,{item:!0,xs:12,children:e.jsx(Te,{})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(ee,{sx:{padding:"2px"}})}),e.jsx(i,{item:!0,xs:12,textAlign:"center",children:e.jsx(S,{component:Se,to:"/login",variant:"subtitle1",sx:{textDecoration:"none"},children:"Already have an account? Sign In"})})]})})})})})]})})};export{ze as default};
