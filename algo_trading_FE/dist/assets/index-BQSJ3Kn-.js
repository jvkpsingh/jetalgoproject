import{a2 as F,a3 as B,j as e,m as p,G as t,B as c,T as a,r as o,a1 as b,t as w,af as k,R as E,b as q,d as D,n as P,E as L,f as R,g as T}from"./index-Dqf28ZN6.js";import{A as z}from"./ArrowBack-eQdt5Pen.js";import{Y as M}from"./YouTube--T8Wt0Ks.js";var f={},W=B;Object.defineProperty(f,"__esModule",{value:!0});var y=f.default=void 0,N=W(F()),_=e;y=f.default=(0,N.default)((0,_.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search");const K=()=>{const r=p();return e.jsx(t,{item:!0,xs:12,children:e.jsxs(c,{display:"flex",alignItems:"center",children:[e.jsx(c,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:40,height:40,borderRadius:"50%",transition:"background-color 0.3s","&:hover":{backgroundColor:"darkgray"},mr:2},children:e.jsx(z,{onClick:()=>{r(-1)}})}),e.jsx(a,{variant:"h6",sx:{fontSize:"1.2rem",fontWeight:"bold"},children:"Find Your Broker"})]})})},H=[{id:1,name:"STOXKART",icon:"/src/assets/images/brokers/stoxKart.png",requiredFields:["Enter Broker ID"]},{id:2,name:"Alice",icon:"/src/assets/images/brokers/alice.png",requiredFields:["Enter Broker ID"]},{id:3,name:"Zerodha",icon:"/src/assets/images/brokers/zerodha.png",requiredFields:["Enter Broker ID","App Name (Any)","API Key","API Secret Key"]},{id:4,name:"Angel",icon:"/src/assets/images/brokers/angel.png",requiredFields:["Enter Broker ID"]},{id:5,name:"FINVISA",icon:"/src/assets/images/brokers/finvasia.png",requiredFields:["Enter Broker ID","App Name (Any)","API Key","API Secret Key"]},{id:6,name:"FYERS",icon:"/src/assets/images/brokers/fyers.png",requiredFields:["Enter Broker ID"]},{id:7,name:"XTS",icon:"/src/assets/images/brokers/xts.png",requiredFields:["Enter Broker ID","App Name (Any)","API Key","API Secret Key"]},{id:8,name:"Upstox",icon:"/src/assets/images/brokers/upstox.png",requiredFields:["ClientID"]},{id:9,name:"IIFL",icon:"/src/assets/images/brokers/iifl.png",requiredFields:["Enter Broker ID"]},{id:10,name:"Master trust",icon:"/src/assets/images/brokers/MasterTrust.png",requiredFields:["Enter Broker ID"]}],V=({onSelectBroker:r,selectedBrokerId:s})=>{const[d,m]=o.useState(""),x=H.filter(i=>i.name.toLowerCase().includes(d.toLowerCase()));return e.jsxs(t,{container:!0,direction:"column",spacing:3,sx:{width:"100%"},children:[e.jsx(t,{item:!0,xs:12,children:e.jsx(K,{})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(b,{placeholder:"Search Brokers",fullWidth:!0,variant:"outlined",value:d,onChange:i=>m(i.target.value),InputProps:{startAdornment:e.jsx(w,{position:"start",children:e.jsx(y,{})})},sx:{"& .MuiOutlinedInput-root":{"&.Mui-focused fieldset":{borderColor:"primary.main"}}}})}),e.jsx(t,{item:!0,xs:12,children:x.length===0?e.jsx(a,{variant:"h6",color:"textSecondary",align:"center",children:"No brokers found"}):e.jsxs(e.Fragment,{children:[e.jsx(a,{variant:"h5",color:"textSecondary",sx:{mb:2},children:"Popular Brokers"}),e.jsx(c,{display:"grid",gap:2,sx:{gridTemplateColumns:{xs:"repeat(3, 1fr)",sm:"repeat(4, 1fr)",md:"repeat(5, 1fr)",lg:"repeat(6, 1fr)"}},children:x.map(i=>e.jsxs(c,{onClick:()=>r(i),sx:{cursor:"pointer",textAlign:"center",width:70,height:"auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:"50%"},children:[e.jsx(k,{alt:i.name,src:i.icon,sx:{bgcolor:"white",width:60,height:60,mb:1,p:1,borderRadius:"50%",objectFit:"cover",border:`3.5px solid ${s===i.id?"skyblue":"gray"}`,transition:"border-color 0.3s ease","&:hover":{borderColor:"primary.main"}}}),e.jsx(a,{variant:"subtitle2",color:"textPrimary",fontWeight:"500",fontSize:14,children:i.name})]},i.id))})]})})]})},Y=({selectedBroker:r})=>{const[s,d]=o.useState({}),[m,x]=o.useState(!1),[i,h]=o.useState(!1),{showSnackbar:S,SnackbarComponent:I}=q();p();const g=o.useMemo(()=>r.requiredFields,[r]),v=o.useCallback((n,l)=>{d(u=>({...u,[n]:l}))},[]);o.useEffect(()=>{const n=setTimeout(()=>{const l=g.every(u=>s[u]&&s[u].trim()!=="");x(l)},100);return()=>clearTimeout(n)},[s,g]);const A="https://backend.jetalgosoftware.com",j=D(()=>R.get(`${A}/broker/upstox/authenticate/upstox?uuid=ekjwvnbejl&upstoxClientId=${s==null?void 0:s.ClientID}`),{onMutate:()=>h(!0),onSuccess:n=>{h(!1),window.location.href=n.data.upstox_authentication_url},onError:n=>{var l;h(!1),S(((l=n.response)==null?void 0:l.data.error.msg)||n.message,"error")}}),C=o.useCallback(()=>{j.mutate(),console.log("Form Data:",s)},[j,s]);return e.jsxs(t,{container:!0,direction:"column",spacing:2,sx:{width:"100%",px:{md:3},minHeight:"82vh",borderLeft:1,borderColor:"#e0e0e0",pt:{xs:3,md:0}},children:[e.jsxs(t,{item:!0,xs:12,children:[e.jsx(a,{variant:"h6",gutterBottom:!0,fontSize:18,fontWeight:700,children:"Add New Broker"}),e.jsxs(c,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(k,{src:r.icon,alt:r.name,sx:{bgcolor:"white",width:60,height:60,mb:1,border:"2px solid gray"}}),e.jsxs(c,{fontWeight:700,children:[e.jsx(a,{fontSize:19,fontWeight:500,children:r.name}),e.jsxs(a,{fontSize:13,display:"flex",alignItems:"center",gap:1,children:["How to Add ",r.name," broker? ",e.jsx(M,{color:"error"})]})]})]})]}),e.jsx(t,{item:!0,xs:12,children:g.map((n,l)=>e.jsx(b,{fullWidth:!0,required:!0,label:n,sx:{mt:2},onChange:u=>v(n,u.target.value)},l))}),e.jsx(t,{item:!0,xs:12,mt:3,children:e.jsx(c,{display:"flex",justifyContent:"center",children:e.jsx(P,{variant:"contained",color:"primary",fullWidth:!0,onClick:C,disabled:!m||i,sx:{borderRadius:"10px",py:1},children:i?e.jsx(L,{size:24,color:"primary"}):"Submit"})})}),e.jsx(I,{})]})},$=E.memo(Y),O=({text:r})=>{const[s,d]=o.useState(!0);return p(),o.useEffect(()=>{d(!1)},[]),e.jsxs(t,{spacing:T,justifyContent:"center",sx:{minHeight:"82vh",borderLeft:1,borderColor:"#e0e0e0",display:{xs:"none",sm:"none",md:"block"}},children:[" ",e.jsx(a,{textAlign:"left",px:5,fontSize:20,fontWeight:500,width:"100%",children:r||""}),e.jsxs(t,{item:!0,xs:12,textAlign:"center",children:[e.jsx(c,{mb:2,children:e.jsx("img",{src:"https://web.algorooms.com/static/media/broker.f7382bf4a577d51366641db39ab94138.svg",alt:"No Brokers",style:{maxWidth:"350px"},loading:"lazy"})}),e.jsx(a,{variant:"h6",gutterBottom:!0,children:"No Brokers found. Please Add brokers!"})]})]})},Z=()=>{const[r,s]=o.useState(null),d=m=>{s(m)};return e.jsxs(t,{container:!0,children:[e.jsx(t,{item:!0,xs:12,md:7.5,children:e.jsx(V,{onSelectBroker:d,selectedBrokerId:r==null?void 0:r.id})}),e.jsx(t,{item:!0,xs:12,md:4.5,children:r?e.jsx($,{selectedBroker:r}):e.jsx(O,{text:"Please select a broker"})})]})};export{Z as default};
